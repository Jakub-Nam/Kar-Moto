<section *ngIf='zeroVehiclesComponent'>
  <app-zero-vehicles></app-zero-vehicles>
</section>

<section>
  <app-filter-menu (filtered)="filtr($event)" *ngIf='!showVehicle && !zeroVehiclesComponent'></app-filter-menu>
</section>
<div class="alert alert-danger" role="alert" *ngIf='this.errorMsg'>
  Problem z serverem Firebase!
</div>

<section>
  <app-one-vehicle [vehicle]='vehicle' *ngIf='showVehicle' (return)='hideOneVehicle($event)'></app-one-vehicle>
</section>

<div *ngIf='!showVehicle'>
  <section class="card mb-3" *ngFor='let vehicle of vehicles | filterBrand: this.filters.brand | 
  filterPriceLow:filters.priceLow | 
  highestPrice:filters.highestPrice | 
  lowestMileage:filters.lowestMileage | 
  highestMileage:filters.highestMileage'>
    <figure>
      <div class="row no-gutters">
        <div class="col-md-3 d-flex ">
          <a (click)='showOneVehicle(vehicle)'>
            <img src="{{ vehicle.payload.doc.data().downloadURL }}" class="card-img px-2 py-2" alt="Zdjęcie pojazdu">
          </a>
        </div>
        <div class="col-md-6 d-flex align-items-lg-center">
          <div class="card-body py-0 px-2">
            <figcaption>
              <h2 class="card-title mb-1">{{ vehicle.payload.doc.data().name | titlecase }}</h2>
              <p class="card-text mb-1">Przebieg: {{ vehicle.payload.doc.data().carMileage }}km</p>
              <p class="card-text mb-0 pt-lg-2">
                <small class="text-muted ">{{ vehicle.payload.doc.data().brand }}</small>
              </p>
              <p class='card-text pt-lg-2' *ngIf='showForAdmin'>
                <small class="pr-3">Dodano:
                  {{ vehicle.payload.doc.data().timestamp | date:'dd-MM-yyyy' }}</small>
              </p>
            </figcaption>
          </div>
        </div>
        <div class="col py-0 px-2 px-md-2 parent-trash-button">
          <div class="row align-items-end">
            <div class="col d-flex justify-content-md-end justify-content-start px-md-1">
              <b class='py-md-2 mr-md-2'>Cena: {{ vehicle.payload.doc.data().price }}zł</b>
            </div>
            <button type='button' class='btn-font-trash px-0 py-0' *ngIf='showForAdmin'
              (click)='toggleDeleteAlert(vehicle)'>
              <fa-icon [icon]="faTrash" class="fas fa-trash"></fa-icon>
            </button>
          </div>
        </div>
      </div>
      <div class="delete-alert row d-flex flex-column" role="alert" *ngIf='deleteAlert'>
        <div class="col">
          <p>Czy na pewno chcesz usunąć ten produkt?</p>
        </div>
        <div class="col text-center">
          <button class='btn btn-dark btn-sm mx-2' (click)='deleteVehicle(vehicle)'>Usuń</button>
          <button class='btn btn-dark btn-sm mx-2' (click)='toggleDeleteAlert()'>Zachowaj</button>
        </div>
      </div>
    </figure>
    
  </section>
</div>
